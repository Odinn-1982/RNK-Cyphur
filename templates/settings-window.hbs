<div class="cyphur-settings-container">
    <div class="cyphur-settings-content">
        <!-- Sound Settings -->
        <div class="cyphur-settings-section">
            <h4><i class="fas fa-volume-up"></i> {{localize 'CYPHUR.SoundSettings'}}</h4>
            
            <div class="cyphur-form-group">
                <label class="cyphur-checkbox-label">
                    <input type="checkbox" name="enableSound" {{#if enableSound}}checked{{/if}}>
                    <span>{{localize 'CYPHUR.EnableSound'}}</span>
                </label>
            </div>

            <div class="cyphur-form-group">
                <label>{{localize 'CYPHUR.NotificationSound'}}</label>
                <div class="cyphur-input-row">
                    <input type="text" name="notificationSound" value="{{notificationSound}}" readonly>
                    <button type="button" class="cyphur-btn-icon" data-action="pickSound">
                        <i class="fas fa-folder-open"></i>
                    </button>
                    <button type="button" class="cyphur-btn-icon" data-action="previewSound">
                        <i class="fas fa-play"></i>
                    </button>
                </div>
            </div>

            <div class="cyphur-form-group">
                <label>{{localize 'CYPHUR.NotificationVolume'}}: {{notificationVolume}}</label>
                <input type="range" name="notificationVolume" min="0" max="1" step="0.1" value="{{notificationVolume}}">
            </div>
        </div>

        <!-- Notification Settings -->
        <div class="cyphur-settings-section">
            <h4><i class="fas fa-bell"></i> {{localize 'CYPHUR.NotificationSettings'}}</h4>
            
            <div class="cyphur-form-group">
                <label class="cyphur-checkbox-label">
                    <input type="checkbox" name="enableDesktopNotifications" {{#if enableDesktopNotifications}}checked{{/if}}>
                    <span>{{localize 'CYPHUR.EnableDesktopNotifications'}}</span>
                </label>
                <button type="button" class="cyphur-btn-small" data-action="requestNotifications">
                    {{localize 'CYPHUR.RequestPermission'}}
                </button>
            </div>
        </div>

        <!-- Appearance Settings -->
        <div class="cyphur-settings-section">
            <h4><i class="fas fa-palette"></i> {{localize 'CYPHUR.AppearanceSettings'}}</h4>
            
            {{#if isGM}}
            <div class="cyphur-form-group">
                <label>{{localize 'CYPHUR.GlobalTheme'}}</label>
                <select name="globalTheme">
                    <option value="none">{{localize 'CYPHUR.ThemeNone'}}</option>
                    {{#each themes}}
                    <option value="{{this.key}}" {{#if this.selected}}selected{{/if}}>{{this.name}}</option>
                    {{/each}}
                </select>
            </div>
            {{/if}}

            <div class="cyphur-form-group">
                <label>{{localize 'CYPHUR.PersonalBackground'}}</label>
                <div class="cyphur-input-row">
                    <input type="text" name="personalBackground" value="{{personalBackground}}" readonly>
                    <button type="button" class="cyphur-btn-icon" data-action="pickBackground">
                        <i class="fas fa-image"></i>
                    </button>
                </div>
            </div>

            <div class="cyphur-form-group">
                <label class="cyphur-checkbox-label">
                    <input type="checkbox" name="shareBackground" {{#if shareBackground}}checked{{/if}}>
                    <span>{{localize 'CYPHUR.ShareBackground'}}</span>
                </label>
            </div>
        </div>

        {{#if isGM}}
        <!-- GM Override Settings -->
        <div class="cyphur-settings-section cyphur-gm-section">
            <h4><i class="fas fa-shield-alt"></i> {{localize 'CYPHUR.GMOverrideSettings'}}</h4>
            
            <div class="cyphur-form-group">
                <label class="cyphur-checkbox-label">
                    <input type="checkbox" name="gmOverrideEnabled" {{#if gmOverrideEnabled}}checked{{/if}}>
                    <span>{{localize 'CYPHUR.EnableGMOverride'}}</span>
                </label>
                <p class="cyphur-hint">{{localize 'CYPHUR.GMOverrideHint'}}</p>
            </div>

            <div class="cyphur-form-group">
                <label>{{localize 'CYPHUR.GMOverrideSound'}}</label>
                <div class="cyphur-input-row">
                    <input type="text" name="gmOverrideSoundPath" value="{{gmOverrideSoundPath}}" readonly>
                    <button type="button" class="cyphur-btn-icon" data-action="pickGMSound">
                        <i class="fas fa-folder-open"></i>
                    </button>
                </div>
            </div>
        </div>
        {{/if}}
    </div>

    <!-- Footer -->
    <div class="cyphur-settings-footer">
        <button type="button" class="cyphur-btn cyphur-btn-primary" data-action="saveSettings">
            <i class="fas fa-save"></i> {{localize 'CYPHUR.SaveSettings'}}
        </button>
    </div>
</div>
